(this.webpackJsonpjaming=this.webpackJsonpjaming||[]).push([[0],[,,,,,,,,,,function(e,t,a){e.exports=a.p+"static/media/delete.665926e2.svg"},function(e,t,a){e.exports=a.p+"static/media/edit.2927f8de.svg"},function(e,t,a){e.exports=a.p+"static/media/refresh.899514fa.svg"},,function(e,t,a){e.exports=a(29)},,,,,function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},function(e,t,a){},,function(e,t,a){},function(e,t,a){},function(e,t,a){"use strict";a.r(t);var n,s=a(0),r=a.n(s),i=a(9),c=a.n(i),l=(a(19),a(13)),o=a(1),u=a(2),p=a(6),h=a(4),d=a(3),y=(a(20),a(21),a(22),a(23),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"renderAction",value:function(){return!0===this.props.isRemoval?"+":"-"}},{key:"handleClickEvent",value:function(){this.props.isRemoval?this.props.addTrack(this.props.track):this.props.removeTrack(this.props.track)}},{key:"render",value:function(){return r.a.createElement("div",{className:"Track"},r.a.createElement("div",{className:"Track-information"},r.a.createElement("h3",null,this.props.track.name),r.a.createElement("p",null,this.props.track.artist," | ",this.props.track.album)),r.a.createElement("button",{onClick:this.handleClickEvent.bind(this),className:"Track-action"},this.renderAction()))}}]),a}(r.a.Component)),m=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"makeTrack",value:function(){var e=this;return this.props.tracks?this.props.tracks.map((function(t){return r.a.createElement(y,{key:t.id,track:t,addTrack:e.props.addTrack,isRemoval:e.props.isRemoval,removeTrack:e.props.removeTrack})})):null}},{key:"render",value:function(){return r.a.createElement("div",{className:"TrackList"},this.makeTrack())}}]),a}(r.a.Component),k=(a(24),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={input:""},n}return Object(u.a)(a,[{key:"handleTermChange",value:function(e){this.setState({input:e.target.value})}},{key:"handleClick",value:function(){console.log("click"),this.props.onSearch(this.state.input)}},{key:"handleKeyPress",value:function(e){"Enter"===e.key&&(console.log("Enter is pressed"),this.props.onSearch(this.state.input))}},{key:"render",value:function(){return r.a.createElement("div",{onKeyPress:this.handleKeyPress.bind(this),className:"SearchBar"},r.a.createElement("input",{onChange:this.handleTermChange.bind(this),placeholder:"Look for songs here!"}),r.a.createElement("button",{onClick:this.handleClick.bind(this),className:"SearchButton"},"Search"))}}]),a}(r.a.Component)),f=(a(25),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"render",value:function(){return r.a.createElement("div",{className:"SearchResults"},r.a.createElement("h3",{className:"searchTitle"},"Search results"),r.a.createElement(m,{addTrack:this.props.addTrack,tracks:this.props.searchResults,isRemoval:!0}))}}]),a}(r.a.Component)),v=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"handleInput",value:function(e){this.props.updateName(e.target.value)}},{key:"onSave",value:function(){this.props.onSave()}},{key:"onExit",value:function(){this.props.onExit()}},{key:"render",value:function(){return r.a.createElement("div",{className:"Playlist niceBox"},r.a.createElement("h2",{className:"sectionTitle"},"edit"===this.props.edit?"Edit your PlayList":"Create a Playlist"),r.a.createElement("div",{className:"playlistFlexContainer"},r.a.createElement("div",{className:"flexChild"},r.a.createElement(k,{onSearch:this.props.search}),r.a.createElement(f,{addTrack:this.props.addTrack,searchResults:this.props.searchResults})),r.a.createElement("div",{className:"flexChild"},r.a.createElement("input",{placeholder:"Your Playlist Name",value:this.props.playListName,onChange:this.handleInput.bind(this)}),r.a.createElement("div",{className:"trackListContainer"},r.a.createElement(m,{tracks:this.props.playListTracks,isRemoval:!1,removeTrack:this.props.removeTrack})),r.a.createElement("div",{className:"buttonSaveContainer"},r.a.createElement("button",{onClick:this.props.onSave,className:"Playlist-save"},"Save"),r.a.createElement("button",{onClick:this.props.onExit,className:"Playlist-save"},"Cancel")))))}}]),a}(r.a.Component),b=a(5),g=a.n(b),P=a(7),E="",T=/access_token=([^&]*)/,j=/expires_in=([^&]*)/,x="https://accounts.spotify.com/authorize?client_id=fda3dbd984a14a6ea8e9d75434e28d7b&response_type=token&redirect_uri=http://localhost:3000&scope="+encodeURIComponent("playlist-modify-public"),O={getHeader:function(){var e=new Headers;return e.append("Authorization","Bearer "+E),{method:"GET",headers:e,mode:"cors",cache:"default"}},getAccessToken:function(){if(E)return console.log("token detected"),E;if(window.location.href.match(T)){console.log("access token is in URL");var e=window.location.href.match(T);return n=window.location.href.match(j)[1],E=e[1],window.setTimeout((function(){return E=""}),1e3*n),window.history.pushState("",null,"/"),E}console.log("need to get the token"),window.location=x},getUserId:function(){var e=this;return Object(P.a)(g.a.mark((function t(){var a,n,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.getHeader(),t.prev=1,t.next=4,fetch("https://api.spotify.com/v1/me?id",a);case 4:if(!(n=t.sent).ok){t.next=14;break}return t.next=8,n.json();case 8:return s=t.sent,console.log("user ID"),console.log(s.id),t.abrupt("return",s.id);case 14:throw new Error("user info fectch failed");case 15:t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),console.log(t.t0);case 20:case"end":return t.stop()}}),t,null,[[1,17]])})))()},searchTrack:function(e){var t=this;return Object(P.a)(g.a.mark((function a(){var n,s,r,i;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(!e){a.next=22;break}return n=t.getHeader(),a.prev=2,a.next=5,fetch("https://api.spotify.com/v1/search?type=track&q="+e,n);case 5:if(!(s=a.sent).ok){a.next=14;break}return a.next=9,s.json();case 9:return r=a.sent,i=r.tracks.items.map((function(e){return{name:e.name,album:e.album.name,artist:e.artists.map((function(e){return e.name})),uri:e.uri,id:e.id}})),a.abrupt("return",i);case 14:throw new Error("failed fetch");case 15:a.next=20;break;case 17:return a.prev=17,a.t0=a.catch(2),a.abrupt("return",console.error(a.t0));case 20:a.next=23;break;case 22:return a.abrupt("return",[]);case 23:case"end":return a.stop()}}),a,null,[[2,17]])})))()},getPlaylist:function(){var e=this;return Object(P.a)(g.a.mark((function t(){var a,n,s,r,i;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=e.getHeader(),t.prev=1,t.next=5,e.getUserId();case 5:t.t0=t.sent,t.next=9;break;case 8:t.t0="";case 9:return n=t.t0,s="https://api.spotify.com/v1/users/".concat(n,"/playlists"),t.next=13,fetch(s,a);case 13:return r=t.sent,t.next=16,r.json();case 16:return i=t.sent,console.log(i),t.abrupt("return",i.items);case 21:t.prev=21,t.t1=t.catch(1),console.error(t.t1);case 24:case"end":return t.stop()}}),t,null,[[1,21]])})))()},getThisPlaylist:function(e){return Object(P.a)(g.a.mark((function t(){var a,n,s;return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{headers:{Authorization:"Bearer "+E,"Content-Type":"application/json"},method:"GET",mode:"cors",cache:"default"});case 3:return a=t.sent,t.next=6,a.json();case 6:return n=t.sent,console.log(n),s=n.items.map((function(e){return{name:e.track.name,album:e.track.album.name,artist:e.track.artists.map((function(e){return e.name})),uri:e.track.uri,id:e.track.id}})),console.log(s),t.abrupt("return",s);case 13:t.prev=13,t.t0=t.catch(0),console.error(t.t0);case 16:case"end":return t.stop()}}),t,null,[[0,13]])})))()},savePlaylist:function(e,t){var a=this;return Object(P.a)(g.a.mark((function n(){var s,r,i,c;return g.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(console.log("save new playlist"),console.log("playlistName: ".concat(e)),console.log("tracksUris"),console.log(t),e&&t){n.next=8;break}console.log("no args"),n.next=33;break;case 8:return n.prev=8,n.next=12,a.getUserId();case 12:n.t0=n.sent,n.next=16;break;case 15:n.t0="";case 16:return s=n.t0,n.next=19,fetch("https://api.spotify.com/v1/users/".concat(s,"/playlists?scope=playlist-modify-public"),{headers:{Authorization:"Bearer "+E,"Content-Type":"application/json"},method:"POST",mode:"cors",cache:"default",body:JSON.stringify({name:e})});case 19:return r=n.sent,n.next=22,r.json();case 22:return i=n.sent,c=i.id,console.log("playlist ID"),console.log(c),n.next=28,fetch("https://api.spotify.com/v1/playlists/".concat(c,"/tracks"),{headers:{Authorization:"Bearer "+E,"Content-Type":"application/json"},method:"POST",mode:"cors",cache:"default",body:JSON.stringify({uris:t})});case 28:n.next=33;break;case 30:n.prev=30,n.t1=n.catch(8),console.log(n.t1);case 33:case"end":return n.stop()}}),n,null,[[8,30]])})))()},editPlaylist:function(e,t){return Object(P.a)(g.a.mark((function a(){var n;return g.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:if(console.log("edit playlist"),console.log("playlist ID: ".concat(e)),console.log("tracksUris"),console.log(t),e&&t){a.next=8;break}console.log("no args"),a.next=19;break;case 8:return a.prev=8,a.next=11,fetch("https://api.spotify.com/v1/playlists/".concat(e,"/tracks"),{headers:{Authorization:"Bearer "+E,"Content-Type":"application/json"},method:"PUT",mode:"cors",cache:"default",body:JSON.stringify({uris:t})});case 11:n=a.sent,console.log("edit response"),console.log(n),a.next=19;break;case 16:a.prev=16,a.t0=a.catch(8),console.log(a.t0);case 19:case"end":return a.stop()}}),a,null,[[8,16]])})))()},deletePlayList:function(e){return Object(P.a)(g.a.mark((function t(){return g.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,fetch("https://api.spotify.com/v1/playlists/".concat(e,"/followers"),{method:"DELETE",headers:{Authorization:"Bearer "+E},mode:"cors",cache:"default"});case 3:t.sent.ok?console.log("delete success"):console.log("potato in the sauasage"),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),console.log(t.t0);case 10:case"end":return t.stop()}}),t,null,[[0,7]])})))()}},N=(a(27),a(10)),w=a.n(N),C=a(11),L=a.n(C),S=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"handleDeleteClick",value:function(){this.props.deletePlaylist(this.props.id)}},{key:"handleEditClick",value:function(){this.props.editPlaylist(this.props.id,this.props.playlist)}},{key:"render",value:function(){return r.a.createElement("div",{className:"PlaylistChunk"},r.a.createElement("h2",{className:"PlaylistTitle"},this.props.playlist),r.a.createElement("div",{className:"buttonContainer"},r.a.createElement("div",{className:"chunkButtonDiv"},r.a.createElement("img",{src:L.a,alt:"edit",onClick:this.handleEditClick.bind(this)})),r.a.createElement("div",{className:"chunkButtonDiv"},r.a.createElement("img",{onClick:this.handleDeleteClick.bind(this),src:w.a,alt:"delete"}))))}}]),a}(r.a.Component),R=a(12),I=a.n(R),U=(a(28),function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(){return Object(o.a)(this,a),t.apply(this,arguments)}return Object(u.a)(a,[{key:"componentDidMount",value:function(){console.log("I am here"),this.props.getPlaylist()}},{key:"displayList",value:function(){var e=this;return this.props.playlists.map((function(t){return r.a.createElement(S,{deletePlaylist:e.props.deletePlaylist,editPlaylist:e.props.editPlaylist,key:t.id,playlist:t.name,id:t.id})}))}},{key:"updateList",value:function(){this.props.getPlaylist(),console.log("Your Playlists have been updated")}},{key:"render",value:function(){return r.a.createElement("div",{className:"YourPlaylist niceBox"},r.a.createElement("h2",{className:"sectionTitle"},"Your Playlists"),r.a.createElement("img",{onClick:this.updateList.bind(this),className:"update",src:I.a,alt:"loading"}),r.a.createElement("div",null,this.displayList()),r.a.createElement("button",{onClick:this.props.createPlaylist,className:"Playlist-save"},"Create new Playlist"))}}]),a}(r.a.Component)),A=function(e){Object(h.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={edit:"none",searchResults:[],playListName:"",playListId:"",trackURIs:[],playListTracks:[],yourPlaylists:[]},n.addTrack=n.addTrack.bind(Object(p.a)(n)),n.removeTrack=n.removeTrack.bind(Object(p.a)(n)),n.updatePlaylistName=n.updatePlaylistName.bind(Object(p.a)(n)),n.savePlaylist=n.savePlaylist.bind(Object(p.a)(n)),n.search=n.search.bind(Object(p.a)(n)),n.deletePlaylist=n.deletePlaylist.bind(Object(p.a)(n)),n.getPlaylist=n.getPlaylist.bind(Object(p.a)(n)),n.editPlaylist=n.editPlaylist.bind(Object(p.a)(n)),n.updatePlaylist=n.updatePlaylist.bind(Object(p.a)(n)),n.onExit=n.onExit.bind(Object(p.a)(n)),n.createPlaylist=n.createPlaylist.bind(Object(p.a)(n)),n}return Object(u.a)(a,[{key:"displayPlaylist",value:function(){return"none"===this.state.edit?null:r.a.createElement(v,{onExit:this.onExit,onSave:"create"===this.state.edit?this.savePlaylist:this.updatePlaylist,updateName:this.updatePlaylistName,removeTrack:this.removeTrack,playListName:this.state.playListName,playListTracks:this.state.playListTracks,edit:this.state.edit,search:this.search,addTrack:this.addTrack,searchResults:this.state.searchResults})}},{key:"savePlaylist",value:function(){var e=this;this.setState({trackURIs:this.state.playListTracks.map((function(e){return e.uri}))},(function(){O.savePlaylist(e.state.playListName,e.state.trackURIs).then(e.getPlaylist()),e.onExit()}))}},{key:"deletePlaylist",value:function(e){var t=this.state.yourPlaylists.filter((function(t){return t.id!==e}));O.deletePlayList(e).then(this.setState({yourPlaylists:t})).catch((function(e){return console.error(e)}))}},{key:"editPlaylist",value:function(e,t){var a=this;console.log("in getPlaylist"),console.log(e),O.getThisPlaylist(e).then((function(n){a.setState({playListTracks:n,edit:"edit",playListName:t,playListId:e})})).catch((function(e){return console.error("failure "+e)}))}},{key:"createPlaylist",value:function(){this.setState({edit:"create"})}},{key:"addTrack",value:function(e){console.log("add Track clicked!"),0===this.state.playListTracks.filter((function(t){return t.id===e.id})).length?(console.log("track is not yet existing in Playlist"),console.log(e),this.setState({playListTracks:[].concat(Object(l.a)(this.state.playListTracks),[e])})):console.log("track is already existing in Playlist, nothing will be done")}},{key:"removeTrack",value:function(e){console.log("removing track");var t=this.state.playListTracks.filter((function(t){return t.id!==e.id}));this.setState({playListTracks:t})}},{key:"getPlaylist",value:function(){var e=this;console.log("in getPlaylist"),O.getPlaylist().then((function(t){console.log(t),e.setState({yourPlaylists:t})}))}},{key:"updatePlaylist",value:function(){var e=this;console.log("UPADTE"),this.setState({trackURIs:this.state.playListTracks.map((function(e){return e.uri}))},(function(){return O.editPlaylist(e.state.playListId,e.state.trackURIs).then(e.onExit())}))}},{key:"updatePlaylistName",value:function(e){this.setState({playListName:e})}},{key:"search",value:function(e){var t=this;O.getAccessToken(),console.log("looking for ".concat(e)),O.searchTrack(e).then((function(e){console.log(e),t.setState({searchResults:e})}))}},{key:"onExit",value:function(){this.setState({edit:"none",playListName:"",playListId:"",trackURIs:[],playListTracks:[],searchResults:[]})}},{key:"render",value:function(){return O.getAccessToken(),r.a.createElement("div",{className:"App"},r.a.createElement("h1",null,"Spoti",r.a.createElement("span",{className:"highlight"},"jam")),r.a.createElement("div",{className:"App-playlist"},r.a.createElement(U,{getPlaylist:this.getPlaylist,deletePlaylist:this.deletePlaylist,playlists:this.state.yourPlaylists,editPlaylist:this.editPlaylist,createPlaylist:this.createPlaylist}),this.displayPlaylist()))}}]),a}(r.a.Component);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));c.a.render(r.a.createElement(A,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}],[[14,1,2]]]);
//# sourceMappingURL=main.1b314052.chunk.js.map